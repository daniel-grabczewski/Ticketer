// Width variables
$menu-width-desktop: 240px;
$submenu-width-desktop: 240px;
$menu-width-mobile: calc(100vw - 48px); // 24px margin on each side
$menu-width-mobile-max: 400px;

$menu-mobile-scale : 1.4;
$h3-desktop-size : 1.25;

// Color variables
$menu-background-color : $neutral-darker;
$submenu-background-color : $neutral-lighter;
$menu-box-shadow : 0 0 20px 10px rgba(0, 0, 0, 0.3);

//=====================================================
// Menu container

@mixin menu-container-base($scale : 1) {
  background-color: $menu-background-color;
  border-radius: #{0.5 * $scale}rem;
  padding: #{1 * $scale}rem;
  width: max-content;
  display: flex;
  flex-direction : column;
  justify-content: center;
  align-items: start;
  box-shadow: $menu-box-shadow;
  color : $secondary;

  > * {
    width: 100%;
  }

  // Centre menu in the center of the screen on mobile
  @media (max-width: $breakpoint-mobile) /*790px*/{
    position: fixed; 
    top: 50%;
    left: 50%; 
    transform: translate(-50%, -50%); 
  }
}

@mixin menu-container {
  @media (max-width: $breakpoint-mobile) {
    @include menu-container-base($menu-mobile-scale)
  }
  @media (min-width : $breakpoint-minimum-desktop) {
    @include menu-container-base()
  }
}



@mixin menu-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-bottom: 1rem;
  gap : 1rem;

  @media (max-width : $breakpoint-mobile) {
    h3 {
      font-size: #{$h3-desktop-size * $menu-mobile-scale}rem;
      font-weight:500;
    }
  }

  @media (min-width : $breakpoint-minimum-desktop) {
    h3 {
      font-size: #{$h3-desktop-size}rem;
      font-weight:500;
    }
  }
}

@mixin menu-buttons-container {
  display: flex;
  flex-direction: column;
}

// Base mixins for buttons with a scale parameter
// ===================================================

@mixin menu-button-base($scale) {
  @include button($min-width: 100%, $scale: $scale, $margin-bottom: 0.5rem);
}

@mixin submenu-button-base($scale) {
  @include button($min-width: max-content, $scale: $scale);
}

@mixin submenu-confirmation-button-base($scale) {
  @include button($error, $error-darker, $min-width: max-content, $scale: $scale);
}

@mixin menu-confirmation-button-base($scale) {
  @include button($error, $error-darker, $min-width: 100%, $scale: $scale);
}


@mixin menu-button {
  @media (max-width: $breakpoint-mobile) {
    @include menu-button-base($menu-mobile-scale);
  }

  @media (min-width: $breakpoint-minimum-desktop) {
    @include menu-button-base(1.2);
  }
}

@mixin submenu-button {
  @media (max-width: $breakpoint-mobile) {
    @include submenu-button-base($menu-mobile-scale);
  }

  @media (min-width: $breakpoint-minimum-desktop) {
    @include submenu-button-base(1.2);
  }
}

@mixin submenu-confirmation-button {
  @media (max-width: $breakpoint-mobile) {
    @include submenu-confirmation-button-base($menu-mobile-scale);
  }

  @media (min-width: $breakpoint-minimum-desktop) {
    @include submenu-confirmation-button-base(1.2);
  }
}

@mixin menu-confirmation-button {
  @media (max-width: $breakpoint-mobile) {
    @include menu-confirmation-button-base($menu-mobile-scale);
  }

  @media (min-width: $breakpoint-minimum-desktop) {
    @include menu-confirmation-button-base(1.2);
  }
}

// ===================================================

@mixin input-core {
  margin-top : 0.25rem;
  margin-bottom : 1rem;
  width: 100%;
  padding: 0.5rem;
  border-radius: 0.3rem;
  font-size: 0.8rem;
  background-color: $secondary;
  box-sizing: border-box;
  border : none;
}

@mixin input-group {
  margin-top : 0.5rem;
  font-weight: 500;

  input[type='text'] {
    @include input-core;
  }

  select {
    @include input-core;
    appearance: none;
    background-image: url("data:image/svg+xml;charset=US-ASCII,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%204%205'><path%20fill='%23aaa'%20d='M2%200L0%202h4L2%200z%20M2%205L0%203h4l-2%202z'/></svg>");
    background-repeat: no-repeat;
    background-position: right 0.5rem center;
    background-size: 0.5rem 0.65rem;
  }
}

@mixin action-button-group {
  margin-top: 24px;
  display: flex;
  justify-content: flex-start;
  button {
    @include submenu-button;
  }
}

@mixin background-selection-header {
  font-size : 1.25rem;
  margin-bottom : 0.5rem;
}


@mixin colors-container {
  display: grid;
  width: 100%; 
  grid-template-columns: repeat(3, 1fr); 
  grid-auto-rows: 1fr; 
  gap: 0.5rem; 
  margin-bottom : 1rem;
}

@mixin color-box {
  aspect-ratio: 1; /* Maintain square shape */
  border-radius: 0.5rem;
  cursor: pointer;
  box-shadow: 0 0 0 0.15rem transparent;

  &.selected {
    box-shadow: 0 0 0 0.15rem $background-lighter; 
  }
}

// Colors for x-button used on menu
$menu-x-button-color : $background-lighter;
$menu-x-button-hover-color : $error-darker;

:root {
  --menu-x-button-color: #{$background-lighter};
  --menu-x-button-hover-color: #{$error-darker};
}
