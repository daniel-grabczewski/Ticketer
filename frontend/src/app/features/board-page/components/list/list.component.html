<div class="list-container">
  <!-- List Header -->
  <div class="list-header">
    <ng-container *ngIf="!isRenamingList">
      <span class="list-title" (click)="enableListRenaming($event)">
        {{ name }}
      </span>
    </ng-container>
    <ng-container *ngIf="isRenamingList">
      <input
        id="list-name-input-{{ id }}"
        class="list-title-input"
        type="text"
        [(ngModel)]="newListName"
        (blur)="saveListName()"
        (keydown)="onListNameKeydown($event)"
        (click)="$event.stopPropagation()"
      />
    </ng-container>
    <button
      class="menu-button"
      (click)="openMenuOverlay($event); $event.stopPropagation()"
    >
      â‹®
    </button>
  </div>

  <!-- Tickets Drag-and-Drop Container -->
  <div
    cdkDropList
    [cdkDropListData]="tickets"
    [cdkDropListConnectedTo]="connectedDropLists"
    [id]="cdkDropListId"
    class="ticket-list"
    (cdkDropListDropped)="onTicketDrop($event)"
  >
    <!-- Placeholder for Empty List -->
    <div *ngIf="tickets.length === 0" class="empty-list-placeholder">
      Drop tickets here
    </div>

    <ng-container *ngFor="let ticket of tickets; let i = index">
      <div
        cdkDrag
        [cdkDragData]="ticket"
        class="ticket-wrapper"
        (cdkDragStarted)="onDragStarted($event)"
        (cdkDragEnded)="onDragEnded()"
        (click)="onTicketClicked(ticket.id, $event)"
      >
        <app-ticket
          [id]="ticket.id"
          [name]="ticket.name"
          [description]="ticket.description"
          [colorId]="ticket.colorId"
          [position]="ticket.position"
          [colorMap]="colorMap"
        ></app-ticket>
        <!-- Custom Placeholder -->
        <div *cdkDragPlaceholder class="ticket-placeholder"></div>
      </div>
    </ng-container>

    
  </div>
  <!-- Add Ticket Section -->
  <div class="add-ticket-section">
    <ng-container *ngIf="!showCreateTicketSubmenu">
      <button class="add-ticket" (click)="onAddTicketButtonClick()">
        + Add a ticket
      </button>
    </ng-container>
    <ng-container *ngIf="showCreateTicketSubmenu">
      <app-create-board-item-submenu
        [placeholder]="'Enter ticket name...'"
        [buttonText]="'Add ticket'"
        (menuAction)="onCreateTicketSubmenuAction($event)"
        (close)="onCreateTicketSubmenuClose()"
      ></app-create-board-item-submenu>
    </ng-container>
  </div>
</div>
