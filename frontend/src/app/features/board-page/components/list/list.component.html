<div class="list-container">
  <!-- List Title and Menu Button -->
  <div class="list-header">
    <input
      class="list-title"
      [(ngModel)]="name"
      (blur)="onRenameList(name)"
    />
    <button class="menu-button" (click)="toggleMenu(); $event.stopPropagation()">â‹®</button>
  </div>

  <!-- Menu Component -->
  <div class="menu-wrapper" *ngIf="showMenu">
    <app-menu
      [menuConfig]="menuConfig"
      (menuAction)="handleMenuAction($event)"
      (close)="closeMenu()"
    ></app-menu>
  </div>

  <!-- Tickets Drag-and-Drop Container -->
  <div
    cdkDropList
    [cdkDropListData]="tickets"
    [cdkDropListConnectedTo]="connectedDropLists"
    [id]="cdkDropListId"
    class="ticket-list"
    (cdkDropListDropped)="onTicketDrop($event)"
  >
    <!-- Placeholder for Empty List -->
    <div *ngIf="tickets.length === 0" class="empty-list-placeholder">
      Drop tickets here
    </div>

    <ng-container *ngFor="let ticket of tickets; let i = index">
      <div cdkDrag [cdkDragData]="ticket" class="ticket-wrapper">
        <app-ticket
          [id]="ticket.id"
          [name]="ticket.name"
          [description]="ticket.description"
          [colorId]="ticket.colorId"
          [position]="ticket.position"
          [colorMap]="colorMap"
        ></app-ticket>

        <!-- Custom Placeholder -->
        <div
          *cdkDragPlaceholder
          class="ticket-placeholder"
        ></div>
      </div>
    </ng-container>
  </div>

  <!-- Add Ticket Button -->
  <button class="add-ticket" (click)="ticketCreated.emit({ listId: id, id: generateUUID(), name: 'New Ticket' })">
    + Add a ticket
  </button>  
</div>
