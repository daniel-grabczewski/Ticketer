<div class="menu-container" (click)="$event.stopPropagation()">
  <!-- Header with title and quit button -->
  <div class="menu-header">
    <h3 class="menu-title">{{ menuConfig.title }}</h3>
    <button class="quit-button" (click)="closeMenu()">Ã—</button>
  </div>

  <div class="menu-buttons">
    <div
      class="menu-button-container"
      *ngFor="let submenuItem of rearrangedSubmenus; let index = index"
    >
      <!-- Menu Button -->
      <button
        class="menu-button"
        [ngClass]="{
          'confirmation-button': submenuItem.submenu.type === 'confirmation-submenu'
        }"
        (click)="openSubmenu(index); $event.stopPropagation()"
      >
        {{ submenuItem.buttonText }}
      </button>

      <!-- Submenu -->
      <ng-container *ngIf="showSubmenu && activeSubmenuIndex === index">
        <div class="submenu-container" (click)="$event.stopPropagation()">
          <ng-container [ngSwitch]="submenuItem.submenu.type">
            <!-- Text Input Submenu -->
            <app-text-input-submenu
              *ngSwitchCase="'text-input-submenu'"
              [title]="getTextInputSubmenuPayload(index).title || ''"
              [textInputLabel]="getTextInputSubmenuPayload(index).textInputLabel || ''"
              [initialText]="getTextInputSubmenuPayload(index).initialText || ''"
              [placeholder]="getTextInputSubmenuPayload(index).placeholder || ''"
              [buttonText]="getTextInputSubmenuPayload(index).buttonText || ''"
              (menuAction)="handleSubmenuAction($event)"
              (close)="closeSubmenu()"
            ></app-text-input-submenu>

            <!-- Confirmation Submenu -->
            <app-confirmation-submenu
              *ngSwitchCase="'confirmation-submenu'"
              [title]="getConfirmationSubmenuPayload(index).title || ''"
              [confirmationMessage]="getConfirmationSubmenuPayload(index).confirmationMessage || ''"
              [buttonText]="getConfirmationSubmenuPayload(index).buttonText || ''"
              (menuAction)="handleSubmenuAction($event)"
              (close)="closeSubmenu()"
            ></app-confirmation-submenu>

            <!-- Other Submenus -->
            <!-- Add other submenu components here as needed -->

            <!-- Default Case -->
            <div *ngSwitchDefault>
              Unknown submenu type: {{ submenuItem.submenu.type }}
            </div>
          </ng-container>
        </div>
      </ng-container>
    </div>
  </div>
</div>
